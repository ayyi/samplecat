/*
 +----------------------------------------------------------------------+
 | This file is part of the Ayyi project. https://www.ayyi.org          |
 | copyright (C) 2004-2024 Tim Orford <tim@orford.org>                  |
 +----------------------------------------------------------------------+
 | This program is free software; you can redistribute it and/or modify |
 | it under the terms of the GNU General Public License version 3       |
 | as published by the Free Software Foundation.                        |
 +----------------------------------------------------------------------+
 |
 */

#include "stdio.h"

extern NewPanelFn 
	listview__new,
	dir_panel_new,
	fileview_new,
	player_control_new,
#ifdef USE_OPENGL
	waveform_panel_new
#endif
	;

ShowPanelFn player_control_on_show_hide;

#ifdef USE_OPENGL
ShowPanelFn show_waveform;
#endif
#ifdef HAVE_FFTW3
ShowPanelFn spectrogram_on_show_hide;
#ifdef USE_OPENGL
#define SPECTROGRAM_NEW spectrogram_area_new
#else
#define SPECTROGRAM_NEW spectrogram_widget_new
#endif
extern NewPanelFn SPECTROGRAM_NEW;
#endif

typedef enum {
	PANEL_TYPE_XX,
	PANEL_TYPE_MAX
} PanelType;

@REGISTER1

Panel panels[] = {
   {"Library",     listview__new},
   {"Search",      },
   {"Tags",        },
   {"Filters",     filters_new},
   {"Inspector",   },
   {"Directories", dir_panel_new},
   {"Filemanager", fileview_new},
   {"Player",      player_control_new, player_control_on_show_hide},
#ifdef USE_OPENGL
   {"Waveform",    waveform_panel_new, show_waveform},
#endif
#ifdef HAVE_FFTW3
   {"Spectrogram", SPECTROGRAM_NEW, spectrogram_on_show_hide, GTK_ORIENTATION_HORIZONTAL},
#endif
#ifdef ROTATOR
   {"Rotator",     _rotator_new},
#endif
};

void register_panels ()
{
	dock_registry_init();

	@REGISTER2

	// currently _all_ panels are registered, to cover the case where the class name is not the same as that used in the layout yaml (spectrogram)
	for (int p=0;p<G_N_ELEMENTS(panels);p++) {
		Panel* panel = &panels[p];
		register_gtk_fn(panel->name, panel->new);
	}
}

